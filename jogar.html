<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="reset.css">
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
	<link rel="icon" href="imagens/logo.png" type="image/png">
	<title>Gamers Club</title>
</head>
<body>
	<header>
		<div class="caixa">	
			<h1>
				<img src="imagens/logo.png" class="logo">
			</h1>

			<nav>
				<ul>
					<li><a href="index.html">Home</a></li>
					<li><a href="quemsomos.html">Quem Somos</a></li>
					<li><a href="contato.html">Contato</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<div class="menu">
		<ul>
			<li class="list">
				<b></b>
				<b></b>
				<a href="videogames.html">
					<span class="ico"><ion-icon name="game-controller"></ion-icon></span>
					<span class="menu-titulo">Video Games</span>
				</a>
			</li>
			<li class="list">
				<a href="dicasdegames.html">
					<span class="ico"><ion-icon name="bulb-outline"></ion-icon></span>
					<span class="menu-titulo">Dicas de Games</span>
				</a>
			</li>
			<li class="list ">
				<a href="novosgames.html">
					<span class="ico"><ion-icon name="ticket-outline"></ion-icon></span>
					<span class="menu-titulo">Novos Games</span>
				</a>
			</li>
			<li class="list ">
				<a href="galeria.html">
					<span class="ico"><ion-icon name="images-outline"></ion-icon></span>
					<span class="menu-titulo">Galeria</span>
				</a>
			</li>
			<li class="list ">
				<a href="jogar.html">
					<span class="ico"><ion-icon name="game-controller-outline"></ion-icon></span>
					<span class="menu-titulo">Jogar</span>
				</a>
			</li>
			<li class="list ">
				<a href="ranking.html">
					<span class="ico"><ion-icon name="bar-chart-outline"></ion-icon></span>
					<span class="menu-titulo">Ranking</span>
				</a>
			</li>
			<li class="list ">
				<a href="e-sports.html">
					<span class="ico"><ion-icon name="trophy-outline"></ion-icon></span>
					<span class="menu-titulo">E-Sports</span>
				</a>
			</li>
			<li class="list ">
				<a href="https://www.reddit.com/r/GameNoticias/" target="_blank">
					<span class="ico"><ion-icon name="chatbubbles-outline"></ion-icon></span>
					<span class="menu-titulo">Fórum</span>
				</a>
			</li>
		</ul>	
	</div>

	<div class="alternar">
		<ion-icon name="menu-outline" class="aberto"></ion-icon>
		<ion-icon name="close-outline" class="fechado"></ion-icon>
	</div>
	<div>
		<a href="https://discord.gg/DSA4aFJN" target="_blank" class="discord-link">
		<img src="imagens/discord-icon.png"></a>
	</div>

	<div>
		<a href="https://chat.whatsapp.com/KJSxUI1sEXiEy9bq7MoVUX" target="_blank" class="whatsapp-link">
		<img src="imagens/whatsapp.png"></a>
	</div>

	<main>
		<div class="corpo">
			<section class="principal">

				<h1 class="jogoVelha">Jogo da Velha</h1>
				
				<fieldset class="players">
					<legend> Jogadores </legend>
					<label for="Jogador 1"> Jogador 1: </label>
					<input type="text" id="jogador1" required/>
					<label for="Jogador 2"> Jogador 2: </label>
					<input type="text" id="jogador2" required/>

					<input type="button" value="Iniciar" class="botao" onclick="javascript: initGame();"/>
				</fieldset>

				<h3 id="jogadorAtual"> </h3>

				<div id="game">
					<table cellpadding="0" cellspacing="0">
						<tr border="1"> 
							<td onclick="javascript: setOnCeil(this, 0);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 1);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 2);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
						</tr>
						<tr> 
							<td onclick="javascript: setOnCeil(this, 3);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 4);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 5);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
						</tr>
						<tr> 
							<td onclick="javascript: setOnCeil(this, 6);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 7);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
							<td onclick="javascript: setOnCeil(this, 8);" onmouseover="javascript: this.style.backgroundColor = 'white'" onmouseout="javascript: this.style.backgroundColor = '#2e2e2e'"> &nbsp; </td>
						</tr>
					</table>
				</div>
			</section>
		</div>
	</main>
	

	<footer>
		<img src="imagens/Logo.png" class="logo">
		<p class="copyright">&copy; Gamers Club. PSM-EPBL-RMG-WADS </p>
	</footer>

	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

	<script> //DEIXA A DIV GAME ESCONDIDA
		window.onload =	function() { document.getElementById('game').style.visibility = 'hidden' };
		
		function Jogador(nome, forma) {
			this.nome = nome;
			this.forma = forma;
		}
		
		var jogador1, jogador2;
	//Jogador da rodada
		var jogadorAtual;
		var formas = ['X', 'O'];
		var index = null;

		/*
			0 1 2
			3 4 5
			6 7 8
		*/
		var tabuleiro = new Array(9);


		initGame = function() {
			var nomeJogador1 = document.getElementById('jogador1').value;
			var nomeJogador2 = document.getElementById('jogador2').value;
			jogador1 = new Jogador(nomeJogador1, 0); //X
			jogador2 = new Jogador(nomeJogador2, 1); //O

			jogadorAtual = jogador1;
			setLabelJogadorAtual();

//APOS DEFINIÇÃO DE JOGADORES, EXIBE A DIV E INICIA JOGO
			document.getElementById('game').style.visibility = 'visible';
			
		}

	/*Reinicia a partida*/
		reset = function() { window.location.reload(); }
		
	/*Seta o nome do jogador da rodada na página HTML*/
		setLabelJogadorAtual = function() {
			document.getElementById('jogadorAtual').innerHTML = 'Jogador atual:  ' + jogadorAtual.nome;
		}

	/*Verifica se o tabuleiro está completamente preenchido, se estiver, significa que ninguém venceu a rodada*/
		tabuleiroIsFilled = function() {
			var preenchidos = 0;
				for(var i = 0; i < tabuleiro.length; i++)
					if(tabuleiro[i]	!= undefined) 
						preenchidos++;
				return preenchidos == tabuleiro.length;
		}

	/*Verifica a existência de ocorrências de um mesmo elemento(X ou O) nas linhas do tabuleiro, procurando um vencedor*/
		allElementsInSomeLine = function() {
			for( var i = 0; i < 7; i += 3) {
				if ( tabuleiro[i] == 'X' && tabuleiro[i + 1] == 'X' && tabuleiro[i + 2] == 'X' ) { 
					alert (jogador1.nome + ' Ganhou!!!');
					reset();
				}
				if ( tabuleiro[i] == 'O' && tabuleiro[i + 1] == 'O' && tabuleiro[i + 2] == 'O' ) {
					alert (jogador2.nome + ' Ganhou!!!');
					reset();
				}
			}
		}

	/*Verifica a existência de ocorrências de um mesmo elemento(X ou O) nas colunas do tabuleiro, procurando um vencedor*/
		allElementsInSomeColumn = function() {
			for( var i = 0; i < 3; i++) {
				if ( tabuleiro[i] == 'X' && tabuleiro[i + 3] == 'X' && tabuleiro[i + 6] == 'X' ) { 
					alert (jogador1.nome + ' Ganhou!!!');
					reset();
				}
				if ( tabuleiro[i] == 'O' && tabuleiro[i + 3] == 'O' && tabuleiro[i + 6] == 'O' ) {
					alert (jogador2.nome + ' Ganhou!!!');
					reset();
				}
			}

		}

	/*Verifica a existência de ocorrências de um mesmo elemento(X ou O) nas diagonais do tabuleiro, procurando um vencedor*/
		allElementsInSomeDiagonal = function() {
			if ( (tabuleiro[0] == 'X' && tabuleiro[4] == 'X' && tabuleiro[8] == 'X') ||
	 			 (tabuleiro[2] == 'X' && tabuleiro[4] == 'X' && tabuleiro[6] == 'X')) {
					alert (jogador1.nome + ' Ganhou!!!');
				reset();
			} else if ( (tabuleiro[0] == 'O' && tabuleiro[4] == 'O' && tabuleiro[8] == 'O') ||
					    (tabuleiro[2] == 'O' && tabuleiro[4] == 'O' && tabuleiro[6] == 'O') ) {
					alert (jogador2.nome + ' Ganhou!!!');
				reset();
			} 
		}

	/*Preenche a célula da tabela HTML escolhida pelo usuário ao clicar, além de cuidar do jogador atual da rodada e chamar as funções
		  de verificação de algum ganhador */
		setOnCeil = function(cel, pos) { 
				if(tabuleiro[pos] == undefined) {
					cel.innerHTML = formas[jogadorAtual.forma];
					tabuleiro[pos] = formas[jogadorAtual.forma];

		//define o jogador da rodada
					(jogadorAtual.forma == 0) ? jogadorAtual = jogador2 : jogadorAtual = jogador1;
					setLabelJogadorAtual();

				} else alert('Ops. Esse bloco ja foi escolhido, escolha outro. =/');

				allElementsInSomeLine();
				allElementsInSomeColumn();
				allElementsInSomeDiagonal();
	
				if ( tabuleiroIsFilled() ) {
					alert ('Ninguem ganhou! :(. Joguem novamente!');
					reset();
				}
				
			
		}</script>
	<script type="text/javascript" src="javascript/menu-lateral.js"></script>

</body>
</html>